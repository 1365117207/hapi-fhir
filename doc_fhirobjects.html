<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-07-29 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="James Agnew" />
    <meta name="Date-Revision-yyyymmdd" content="20140729" />
    <meta http-equiv="Content-Language" content="en" />
    <title>HAPI - 
		Data Model - HAPI FHIR</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<script src="syntaxhighlighter/shCore.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushJScript.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushJava.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushBash.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushXml.js" type="text/javascript"></script>
                      
        
<link rel="stylesheet" type="text/css" href="syntaxhighlighter/shCore.css"/>
                      
        
<link rel="stylesheet" type="text/css" href="syntaxhighlighter/shThemeDefault.css"/>
                      
        
<link rel="shortcut icon" href="http://hl7api.sourceforge.net/images/favicon.png"/>
                      
        
<link rel="stylesheet" type="text/css" href="hapi.css"/>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                                                                                                <img src="images/hapi_fhir_banner.png"  alt="HAPI"/>
                </a>
                      </div>
        <div class="pull-right">                                <a href="./" id="bannerRight">
                                                                                                <img src="images/hapi_fhir_banner_right.png"  alt="FHIR"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-07-29
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.5
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://www.uhn.ca/" class="externalLink" title="University Health Network">
        University Health Network</a>
      </li>

  
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://hl7.org/" class="externalLink" title="hl7.org">
        hl7.org</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/jamesagnew/hapi-fhir/" class="externalLink" title="GitHub Page">
        GitHub Page</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Welcome</li>
                              
      <li>
  
                          <a href="index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                
      <li>
  
                          <a href="download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                
      <li>
  
                          <a href="doc_upgrading.html" title="Upgrade Guide">
          <i class="none"></i>
        Upgrade Guide</a>
            </li>
                
      <li>
  
                          <a href="changes-report.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="doc_intro.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>The Data Model</a>
          </li>
                
      <li>
  
                          <a href="doc_rest_server.html" title="RESTful Server">
          <i class="none"></i>
        RESTful Server</a>
            </li>
                
      <li>
  
                          <a href="doc_rest_client.html" title="RESTful Client">
          <i class="none"></i>
        RESTful Client</a>
            </li>
                
      <li>
  
                          <a href="doc_rest_operations.html" title="RESTful Operations">
          <i class="none"></i>
        RESTful Operations</a>
            </li>
                
      <li>
  
                          <a href="doc_extensions.html" title="Extensions">
          <i class="none"></i>
        Extensions</a>
            </li>
                
      <li>
  
                          <a href="doc_narrative.html" title="Narrative Generator">
          <i class="none"></i>
        Narrative Generator</a>
            </li>
                
      <li>
  
                          <a href="doc_logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                
      <li>
  
                          <a href="doc_tinder.html" title="Tinder Plugin">
          <i class="none"></i>
        Tinder Plugin</a>
            </li>
                              <li class="nav-header">Community</li>
                              
      <li>
  
                          <a href="https://groups.google.com/d/forum/hapi-fhir" class="externalLink" title="Google Group">
          <i class="none"></i>
        Google Group</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/jamesagnew/hapi-fhir/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">JavaDocs</li>
                              
      <li>
  
                          <a href="apidocs/index.html" title="API Documentation">
          <i class="none"></i>
        API Documentation</a>
            </li>
                
      <li>
  
                          <a href="xref/index.html" title="JXR">
          <i class="none"></i>
        JXR</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="team-list.html" title="Developers">
          <i class="none"></i>
        Developers</a>
            </li>
                
      <li>
  
                          <a href="surefire-report.html" title="Unit Test Report">
          <i class="none"></i>
        Unit Test Report</a>
            </li>
                
      <li>
  
                          <a href="findbugs.html" title="FindBugs">
          <i class="none"></i>
        FindBugs</a>
            </li>
                
      <li>
  
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                
      <li>
  
                          <a href="http://sourceforge.net/p/hl7api/fhircode/ci/master/tree/" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="hl7api.sourceforge.net/hapi-fhir/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="https://sourceforge.net/projects/hl7api/" title="Hosted on SourceForge.net" class="builtBy">
        <img class="builtBy"  alt="Hosted on SourceForge.net" src="http://sflogo.sourceforge.net/sflogo.php?group_id=38899&type=2"    />
      </a>
                                                                                                          <a href="http://maven.apache.org" title="Built with Maven 2" class="builtBy">
        <img class="builtBy"  alt="Built with Maven 2" src="images/logos/maven-feather.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            

	

		<!-- The body of the document contains a number of sections -->
		<div class="section">
<h2>Working with Resources<a name="Working_with_Resources"></a></h2>
			
			
			
<ul>
<li><a href="#Working_with_Resources">Working with Resources</a>
<ul>
<li><a href="#Navigating_Structures">Navigating Structures</a></li>
<li><a href="#CodedEnumerated_Values">Coded/Enumerated Values</a></li>
<li><a href="#Convenience_Methods">Convenience Methods</a></li></ul></li></ul>
			
			
<p>
				Every resource type defined by FHIR has a corresponding 
				class, which contains a number of getters and setters for 
				the basic properties of that resource.
			</p>

			
<p>
				HAPI tries to make populating objects easier, by providing lots of 
				convenience methods. For example, the Observation resource has an
				&quot;issued&quot; property which is of the FHIR &quot;instant&quot; type (a system time with
				either seconds or milliseconds precision). There are methods to
				use the actual FHIR datatype, but also convenience methods which
				use built-in Java types.
			</p>

			
				
				
			
<div class="source">
<pre>Observation obs = new Observation();

// These are all equivalent
obs.setIssued(new InstantDt(new Date()));
obs.setIssued(new Date(), TemporalPrecisionEnum.MILLI);
obs.setIssuedWithMillisPrecision(new Date());

// The InstantDt also lets you work with the instant as a Java Date
// object or as a FHIR String.
Date date = obs.getIssued().getValue(); // A date object
String dateString = obs.getIssued().getValueAsString(); // &quot;2014-03-08T12:59:58.068-05:00&quot;
</pre></div>

			
<div class="section">
<h3>Navigating Structures<a name="Navigating_Structures"></a></h3>
			
				
<p>
					Most HAPI structures provide getters that automatically create
					child objects on access. This means it is simple to navigate 
					complex structures without needing to worry about instantiating
					child objects.
				</p>
			
				
					
					
				
<div class="source">
<pre>Observation observation = new Observation();

// None of these calls will return null, but instead create their respective
// child elements.
IdentifierDt identifierDt = observation.getIdentifier();
PeriodDt periodDt         = observation.getIdentifier().getPeriod();
DateTimeDt activeDt       = observation.getIdentifier().getPeriod().getStart();

// DateTimeDt is a FHIR primitive however, so the following will return null
// unless a value has been placed there.
Date active = observation.getIdentifier().getPeriod().getStart().getValue();
</pre></div>

			</div>

			
<div class="section">
<h3>Coded/Enumerated Values<a name="CodedEnumerated_Values"></a></h3>
			
				
<p>
					There are many places in the FHIR specification where a &quot;coded&quot; string is
					used. This means that a code must be chosen from a list of allowable values.
				</p>
			
				
<p>
					In these cases, HAPI tries to simplify the process by providing Java Enum
					types, which can be used to reduce complexity and provide compile-time
					checking.
				</p>
				
				
					
					
				
<div class="source">
<pre>Patient patient = new Patient();

// Coded types can naturally be set using plain Strings
CodingDt genderCoding = patient.getGender().addCoding();
genderCoding.setSystem(&quot;http://hl7.org/fhir/v3/AdministrativeGender&quot;);
genderCoding.setCode(&quot;M&quot;);

// This is equivalent to the three statements above
patient.setGender(AdministrativeGenderCodesEnum.M);
</pre></div>

			</div>
			
			
<div class="section">
<h3>Convenience Methods<a name="Convenience_Methods"></a></h3>
				
				
<p>
					The FHIR data model is rich enough to meet common use cases, but sometimes
					that richness adds complexity. For example, a Patient may have multiple names
					(a preferred name, a nickname, etc.) and each of those names may have multiple
					last names, multiple prefixes, etc.
				</p>
			
				
<p>
					The example below shows populating a name entry for a Patient. Note the
					use of the StringDt type, which encapsulates a regular String, but allows for
					extensions to be added.
				</p>
			
				
					
					
				
<div class="source">
<pre>Patient patient = new Patient();
HumanNameDt name = patient.addName();
StringDt family = name.addFamily();
family.setValue(&quot;Smith&quot;);
StringDt firstName = name.addGiven();
firstName.setValue(&quot;Rob&quot;);
StringDt secondName = name.addGiven();
secondName.setValue(&quot;Bruce&quot;);
</pre></div>
			
				
<p>
					HAPI also provides for simple setters that use Java primitive types
					and can be chained, leading to much simpler code.
				</p>
			
				
					
					
				
<div class="source">
<pre>Patient patient = new Patient();
patient.addName().addFamily(&quot;Smith&quot;).addGiven(&quot;Rob&quot;).addGiven(&quot;Bruce&quot;);
</pre></div>
			
			</div>
			
		</div>

	


                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014
                        <a href="http://www.uhn.ca">University Health Network</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        <script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1395874-5', 'auto');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>
                </body >
</html>