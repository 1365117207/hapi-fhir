<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-08-16 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="James Agnew" />
    <meta name="Date-Revision-yyyymmdd" content="20140816" />
    <meta http-equiv="Content-Language" content="en" />
    <title>HAPI &#x2013; HAPI FHIR - Free/Open Source Implementation of HL7 FHIR for Java</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<script src="syntaxhighlighter/shCore.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushJScript.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushJava.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushBash.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushXml.js" type="text/javascript"></script>
                      
        
<link rel="stylesheet" type="text/css" href="syntaxhighlighter/shCore.css"/>
                      
        
<link rel="stylesheet" type="text/css" href="syntaxhighlighter/shThemeDefault.css"/>
                      
        
<link rel="shortcut icon" href="http://hl7api.sourceforge.net/images/favicon.png"/>
                      
        
<link rel="stylesheet" type="text/css" href="hapi.css"/>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://hl7api.sourceforge.net/hapi-fhir/" id="bannerLeft">
                                                                                                <img src="images/hapi_fhir_banner.png"  alt="HAPI"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://hl7api.sourceforge.net/hapi-fhir/" id="bannerRight">
                                                                                                <img src="images/hapi_fhir_banner_right.png"  alt="FHIR"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-08-16
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.6-SNAPSHOT
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://www.uhn.ca/" class="externalLink" title="University Health Network">
        University Health Network</a>
      </li>

  
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://hl7.org/" class="externalLink" title="hl7.org">
        hl7.org</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/jamesagnew/hapi-fhir/" class="externalLink" title="GitHub Page">
        GitHub Page</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Welcome</li>
                              
      <li>
  
                          <a href="index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                
      <li>
  
                          <a href="download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                
      <li>
  
                          <a href="doc_upgrading.html" title="Upgrade Guide">
          <i class="none"></i>
        Upgrade Guide</a>
            </li>
                
      <li>
  
                          <a href="changes-report.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Test Server</li>
                              
      <li>
  
                          <a href="http://fhirtest.uhn.ca" class="externalLink" title="Public Test Server">
          <i class="none"></i>
        Public Test Server</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li class="active">
  
            <a href="#"><i class="none"></i>Introduction</a>
          </li>
                                                                                                
      <li>
  
                          <a href="doc_fhirobjects.html" title="The Data Model">
          <i class="icon-chevron-down"></i>
        The Data Model</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="doc_extensions.html" title="Extensions">
          <i class="none"></i>
        Extensions</a>
            </li>
                    
      <li>
  
                          <a href="doc_resource_references.html" title="Resource References">
          <i class="none"></i>
        Resource References</a>
            </li>
                    
      <li>
  
                          <a href="doc_tags.html" title="Tags">
          <i class="none"></i>
        Tags</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="doc_rest_client.html" title="RESTful Client">
          <i class="none"></i>
        RESTful Client</a>
            </li>
                                                                                                                  
      <li>
  
                          <a href="doc_rest_server.html" title="RESTful Server">
          <i class="icon-chevron-down"></i>
        RESTful Server</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="doc_rest_operations.html" title="RESTful Operations">
          <i class="none"></i>
        RESTful Operations</a>
            </li>
                    
      <li>
  
                          <a href="doc_narrative.html" title="Narrative Generator">
          <i class="none"></i>
        Narrative Generator</a>
            </li>
                    
      <li>
  
                          <a href="doc_cors.html" title="CORS Support">
          <i class="none"></i>
        CORS Support</a>
            </li>
                    
      <li>
  
                          <a href="doc_server_tester.html" title="Web Testing UI">
          <i class="none"></i>
        Web Testing UI</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="doc_logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                
      <li>
  
                          <a href="doc_tinder.html" title="Tinder Plugin">
          <i class="none"></i>
        Tinder Plugin</a>
            </li>
                              <li class="nav-header">Community</li>
                              
      <li>
  
                          <a href="https://groups.google.com/d/forum/hapi-fhir" class="externalLink" title="Google Group">
          <i class="none"></i>
        Google Group</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/jamesagnew/hapi-fhir/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">JavaDocs</li>
                              
      <li>
  
                          <a href="apidocs/index.html" title="API Documentation">
          <i class="none"></i>
        API Documentation</a>
            </li>
                
      <li>
  
                          <a href="xref/index.html" title="JXR">
          <i class="none"></i>
        JXR</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="team-list.html" title="Developers">
          <i class="none"></i>
        Developers</a>
            </li>
                
      <li>
  
                          <a href="surefire-report.html" title="Unit Test Report">
          <i class="none"></i>
        Unit Test Report</a>
            </li>
                
      <li>
  
                          <a href="findbugs.html" title="FindBugs">
          <i class="none"></i>
        FindBugs</a>
            </li>
                
      <li>
  
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                
      <li>
  
                          <a href="http://sourceforge.net/p/hl7api/fhircode/ci/master/tree/" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="jamesagnew.github.io/hapi-fhir/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="https://sourceforge.net/projects/hl7api/" title="Hosted on SourceForge.net" class="builtBy">
        <img class="builtBy"  alt="Hosted on SourceForge.net" src="http://sflogo.sourceforge.net/sflogo.php?group_id=38899&type=2"    />
      </a>
                                                                                                          <a href="http://maven.apache.org" title="Built with Maven 2" class="builtBy">
        <img class="builtBy"  alt="Built with Maven 2" src="images/logos/maven-feather.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            

	

		<!-- The body of the document contains a number of sections -->
		<div class="section">
<h2><a name="Developing_using_HAPI_FHIR"></a>Developing using HAPI FHIR</h2>
			
			
			
<ul>
<li><a href="#Developing_using_HAPI_FHIR">Developing using HAPI FHIR</a></li>
<li><a href="#Getting_Started">Getting Started</a>
<ul>
<li><a href="#Introcuding_the_FHIR_Context">Introcuding the FHIR Context</a></li>
<li><a href="#Parsing_a_resource_from_a_String">Parsing a resource from a String</a></li>
<li><a href="#Encoding_a_Resource_to_a_String">Encoding a Resource to a String</a></li>
<li><a href="#Fluent_Programming">Fluent Programming</a></li>
<li><a href="#JSON_Encoding">JSON Encoding</a></li></ul></li></ul>
			
			
<p>
				The HAPI FHIR library is an implementation of the 
				<a class="externalLink" href="http://hl7.org/implement/standards/fhir/">HL7 FHIR specification</a>
				for Java. Explaining what FHIR is would be beyond the scope of this documentation,
				so if you have not previously worked with FHIR, the specification is a good place to
				start. This is often not actually the case when discussing messaging protocols, but
				in this case it is so: The FHIR specification is designed to be readable and
				implementable, and is filled with good information.
			</p>
			
			
<p>
				Part of the key to why FHIR is a good specification is the fact that its design
				is based on the design of other successful APIs (in particular, the FHIR designers
				often reference the Highrise API as a key influence in the design of the spec.)
			</p>
			
			
<p>
				HAPI FHIR is based on the same principle, but applied to the Java implementation: We
				have based the design of this API on the JAXB and JAX-WS APIs, which we consider to be
				very well thought-out, and very usable APIs. This does <b>not</b> mean that HAPI-FHIR
				actually uses these two APIs however, or that HAPI-FHIR is in any way compliant with
				JAXB (<a class="externalLink" href="https://jcp.org/en/jsr/detail?id=222">JSR222</a>) or JAX-WS 
				(<a class="externalLink" href="https://jcp.org/en/jsr/detail?id=222">JSR224</a>), only that we have tried 
				to emluate the easy-to-use, but flexible design of these specifications. 
			</p>
						
		</div>

		
<div class="section">
<h2><a name="Getting_Started"></a>Getting Started</h2>
			
			
<p>
				To get started with HAPI FHIR, first download a copy and add it
				to your project. See the <a href="./download.html">Download Page</a>
				for instructions.
			</p>			
			
			
<div class="section">
<h3><a name="Introcuding_the_FHIR_Context"></a>Introcuding the FHIR Context</h3>

				
<p>
					HAPI defines model classes for every resource type and datatype defined by the FHIR specification.
					For example, here is the <a href="./apidocs/ca/uhn/fhir/model/dstu/resource/Patient.html">Patient</a>
					resource specification. If you browse the JavaDoc you will see getters and setters for the
					various properties that make up a Patient resource.
				</p>

				
<p>
					We will come back to how to interact with these objects in a moment, but first 
					we need to see the FhirContext. The starting point to using HAPI is the
					<a href="./apidocs/ca/uhn/fhir/context/FhirContext.html">FhirContext</a> object.
					The following snippet shows how to create a context object, which is similar in
					purpose to the 
					<a class="externalLink" href="http://docs.oracle.com/javaee/5/api/javax/xml/bind/JAXBContext.html">JAXBContext</a>. 
				</p>
	
				
					
					
				
<div class="source">
<pre>FhirContext ctx = new FhirContext();
</pre></div>

			</div>
			
			
<div class="section">
<h3><a name="Parsing_a_resource_from_a_String"></a>Parsing a resource from a String</h3>
								
				
<p>
					This 
					<a href="./apidocs/ca/uhn/fhir/parser/IParser.html">Parser instance</a> 
					can then be used to parse messages. Note that you may use the context to
					create as many parsers are you want. 
				</p>
				
				
<p>
					<b>Performance tip: </b>
					The FhirContext is an expensive object to create, so you should try to create
					it once and keep it around during the life of your application. Parsers, on
					the other hand, are	very lightweight and do not need to be reused.
				</p>
				
				
					
					
				
<div class="source">
<pre>// The following is an example Patient resource
String msgString = &quot;&lt;Patient xmlns=\&quot;http://hl7.org/fhir\&quot;&gt;&quot; 
  + &quot;&lt;text&gt;&lt;status value=\&quot;generated\&quot; /&gt;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;John Cardinal&lt;/div&gt;&lt;/text&gt;&quot;
  + &quot;&lt;identifier&gt;&lt;system value=\&quot;http://orionhealth.com/mrn\&quot; /&gt;&lt;value value=\&quot;PRP1660\&quot; /&gt;&lt;/identifier&gt;&quot;
  + &quot;&lt;name&gt;&lt;use value=\&quot;official\&quot; /&gt;&lt;family value=\&quot;Cardinal\&quot; /&gt;&lt;given value=\&quot;John\&quot; /&gt;&lt;/name&gt;&quot;
  + &quot;&lt;gender&gt;&lt;coding&gt;&lt;system value=\&quot;http://hl7.org/fhir/v3/AdministrativeGender\&quot; /&gt;&lt;code value=\&quot;M\&quot; /&gt;&lt;/coding&gt;&lt;/gender&gt;&quot;
  + &quot;&lt;address&gt;&lt;use value=\&quot;home\&quot; /&gt;&lt;line value=\&quot;2222 Home Street\&quot; /&gt;&lt;/address&gt;&lt;active value=\&quot;true\&quot; /&gt;&quot;
  + &quot;&lt;/Patient&gt;&quot;;

// The hapi context object is used to create a new XML parser
// instance. The parser can then be used to parse (or unmarshall) the 
// string message into a Patient object 
IParser parser = ctx.newXmlParser();
Patient patient = parser.parseResource(Patient.class, msgString);

// The patient object has accessor methods to retrieve all of the
// data which has been parsed into the instance. All of the
// FHIR datatypes are represented by classes which end in &quot;Dt&quot;. 
StringDt patientId = patient.getIdentifier().get(0).getValue();
StringDt familyName = patient.getName().get(0).getFamily().get(0);
CodeDt gender = patient.getGender().getCoding().get(0).getCode();

// The various datatype classes have accessors called getValue()
System.out.println(patientId.getValue()); // PRP1660
System.out.println(familyName.getValue()); // Cardinal
System.out.println(gender.getValue()); // M
</pre></div>

			</div>

			
<div class="section">
<h3><a name="Encoding_a_Resource_to_a_String"></a>Encoding a Resource to a String</h3>
								
				
<p>
					The parser can also be used to encode a resource (which you can populate
					with your own values) just as easily. 
				</p>
				
				
					
					
				
<div class="source">
<pre>
/**
 * FHIR model types in HAPI are simple POJOs. To create a new
 * one, invoke the default constructor and then
 * start populating values.
 */
Patient patient = new Patient();

// Add an MRN (a patient identifier)
IdentifierDt id = patient.addIdentifier();
id.setSystem(&quot;http://example.com/fictitious-mrns&quot;);
id.setValue(&quot;MRN001&quot;);

// Add a name
HumanNameDt name = patient.addName();
name.setUse(NameUseEnum.OFFICIAL);
name.addFamily(&quot;Tester&quot;);
name.addGiven(&quot;John&quot;);
name.addGiven(&quot;Q&quot;);

// We can now use a parser to encode this resource into a string.
String encoded = ctx.newXmlParser().encodeResourceToString(patient);
System.out.println(encoded);
</pre></div>
				
				<!-- ****** The section below on fluent references the snippet above
				     ****** so be careful about any reordering! -->

				
<p>
					This code gives the following output:
				</p>

				
<div class="source">
<pre>&lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;
   &lt;identifier&gt;
      &lt;system value=&quot;http://example.com/fictitious-mrns&quot;/&gt;
      &lt;value value=&quot;MRN001&quot;/&gt;
   &lt;/identifier&gt;
   &lt;name&gt;
      &lt;use value=&quot;official&quot;/&gt;
      &lt;family value=&quot;Tester&quot;/&gt;
      &lt;given value=&quot;John&quot;/&gt;
      &lt;given value=&quot;Q&quot;/&gt;
   &lt;/name&gt;
&lt;/Patient&gt;</pre></div>

			</div>

			
<div class="section">
<h3><a name="Fluent_Programming"></a>Fluent Programming</h3>
			
				
<p>
					Much of the HAPI FHIR API is designed using a fluent style,
					where method calls can be chained in a natural way. This
					leads to tighter and easier-to-read code.
				</p>
				
				
<p>
					The following snippet is functionally identical to the
					example above:
				</p>

				
					
					
				
<div class="source">
<pre>Patient patient = new Patient();
patient.addIdentifier().setSystem(&quot;http://example.com/fictitious-mrns&quot;).setValue(&quot;MRN001&quot;);
patient.addName().setUse(NameUseEnum.OFFICIAL).addFamily(&quot;Tester&quot;).addGiven(&quot;John&quot;).addGiven(&quot;Q&quot;);

encoded = ctx.newJsonParser().setPrettyPrint(true).encodeResourceToString(patient);
System.out.println(encoded);
</pre></div>
			
			</div>
			
			
<div class="section">
<h3><a name="JSON_Encoding"></a>JSON Encoding</h3>
								
				
<p>
					JSON parsing/encoding is also supported. 
				</p>
				
				
					
					
				
<div class="source">
<pre>IParser jsonParser = ctx.newJsonParser();
jsonParser.setPrettyPrint(true);
encoded = jsonParser.encodeResourceToString(patient);
System.out.println(encoded);
</pre></div>

				
<p>
					This code gives the following output:
				</p>

				
<div class="source">
<pre>{
    &quot;resourceType&quot;:&quot;Patient&quot;,
    &quot;identifier&quot;:[
        {
            &quot;system&quot;:&quot;http://example.com/fictitious-mrns&quot;,
            &quot;value&quot;:&quot;MRN001&quot;
        }
    ],
    &quot;name&quot;:[
        {
            &quot;use&quot;:&quot;official&quot;,
            &quot;family&quot;:[
                &quot;Tester&quot;
            ],
            &quot;given&quot;:[
                &quot;John&quot;,
                &quot;Q&quot;
            ]
        }
    ]
}</pre></div>

			</div>

		</div>

	


                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014
                        <a href="http://www.uhn.ca">University Health Network</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        <script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1395874-5', 'auto');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>
                </body >
</html>