<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-10-23 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="James Agnew" />
    <meta name="Date-Revision-yyyymmdd" content="20141023" />
    <meta http-equiv="Content-Language" content="en" />
    <title>HAPI &#x2013; RESTful Client - HAPI FHIR</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<script src="syntaxhighlighter/shCore.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushJScript.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushJava.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushBash.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushXml.js" type="text/javascript"></script>
                      
        
<link rel="stylesheet" type="text/css" href="syntaxhighlighter/shCore.css"/>
                      
        
<link rel="stylesheet" type="text/css" href="syntaxhighlighter/shThemeDefault.css"/>
                      
        
<link rel="shortcut icon" href="http://hl7api.sourceforge.net/images/favicon.png"/>
                      
        
<link rel="stylesheet" type="text/css" href="hapi.css"/>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                                                                                                <img src="images/hapi_fhir_banner.png"  alt="HAPI"/>
                </a>
                      </div>
        <div class="pull-right">                                <a href="./" id="bannerRight">
                                                                                                <img src="images/hapi_fhir_banner_right.png"  alt="FHIR"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-10-23
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.7
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://www.uhn.ca/" class="externalLink" title="University Health Network">
        University Health Network</a>
      </li>

  
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://hl7.org/" class="externalLink" title="hl7.org">
        hl7.org</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/jamesagnew/hapi-fhir/" class="externalLink" title="GitHub Page">
        GitHub Page</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Welcome</li>
                              
      <li>
  
                          <a href="index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                
      <li>
  
                          <a href="download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                
      <li>
  
                          <a href="doc_upgrading.html" title="Upgrade Guide">
          <i class="none"></i>
        Upgrade Guide</a>
            </li>
                
      <li>
  
                          <a href="changes-report.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Test Server</li>
                              
      <li>
  
                          <a href="http://fhirtest.uhn.ca" class="externalLink" title="Public Test Server">
          <i class="none"></i>
        Public Test Server</a>
            </li>
                
      <li>
  
                          <a href="doc_vagrant.html" title="Vagrant (Private) Test Server">
          <i class="none"></i>
        Vagrant (Private) Test Server</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="doc_intro.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                                                                                                                  
      <li>
  
                          <a href="doc_fhirobjects.html" title="The Data Model">
          <i class="icon-chevron-down"></i>
        The Data Model</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="doc_extensions.html" title="Extensions">
          <i class="none"></i>
        Extensions</a>
            </li>
                    
      <li>
  
                          <a href="doc_resource_references.html" title="Resource References">
          <i class="none"></i>
        Resource References</a>
            </li>
                    
      <li>
  
                          <a href="doc_tags.html" title="Tags">
          <i class="none"></i>
        Tags</a>
            </li>
                    
      <li>
  
                          <a href="doc_validation.html" title="Validation">
          <i class="none"></i>
        Validation</a>
            </li>
              </ul>
        </li>
                                                                      
      <li>
  
                          <a href="doc_rest_client.html" title="RESTful Client">
          <i class="icon-chevron-down"></i>
        RESTful Client</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><i class="none"></i>Interceptors (client)</a>
          </li>
              </ul>
        </li>
                                                                                                                                    
      <li>
  
                          <a href="doc_rest_server.html" title="RESTful Server">
          <i class="icon-chevron-down"></i>
        RESTful Server</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="doc_rest_operations.html" title="RESTful Operations">
          <i class="none"></i>
        RESTful Operations</a>
            </li>
                    
      <li>
  
                          <a href="doc_narrative.html" title="Narrative Generator">
          <i class="none"></i>
        Narrative Generator</a>
            </li>
                    
      <li>
  
                          <a href="doc_cors.html" title="CORS Support">
          <i class="none"></i>
        CORS Support</a>
            </li>
                    
      <li>
  
                          <a href="doc_rest_server_interceptor.html" title="Interceptors (server)">
          <i class="none"></i>
        Interceptors (server)</a>
            </li>
                    
      <li>
  
                          <a href="doc_server_tester.html" title="Web Testing UI">
          <i class="none"></i>
        Web Testing UI</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="doc_logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                
      <li>
  
                          <a href="doc_tinder.html" title="Tinder Plugin">
          <i class="none"></i>
        Tinder Plugin</a>
            </li>
                              <li class="nav-header">Community</li>
                              
      <li>
  
                          <a href="https://groups.google.com/d/forum/hapi-fhir" class="externalLink" title="Google Group">
          <i class="none"></i>
        Google Group</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/jamesagnew/hapi-fhir/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">JavaDocs</li>
                              
      <li>
  
                          <a href="apidocs/index.html" title="API Documentation">
          <i class="none"></i>
        API Documentation</a>
            </li>
                
      <li>
  
                          <a href="xref/index.html" title="JXR">
          <i class="none"></i>
        JXR</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="team-list.html" title="Developers">
          <i class="none"></i>
        Developers</a>
            </li>
                
      <li>
  
                          <a href="surefire-report.html" title="Unit Test Report">
          <i class="none"></i>
        Unit Test Report</a>
            </li>
                
      <li>
  
                          <a href="findbugs.html" title="FindBugs">
          <i class="none"></i>
        FindBugs</a>
            </li>
                
      <li>
  
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/jamesagnew/hapi-fhir" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="jamesagnew.github.io/hapi-fhir/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                         <a href="https://github.com/jamesagnew/hapi-fhir" title="Hosted on GitHub" class="builtBy">
        <img class="builtBy"  alt="Hosted on GitHub" src="images/github-logo-mini.png"    />
      </a>
                                                                                                          <a href="http://maven.apache.org" title="Built with Maven 3" class="builtBy">
        <img class="builtBy"  alt="Built with Maven 3" src="images/maven-logo-mini.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            

	

		<div class="section">
<h2><a name="Client_Interceptors"></a>Client Interceptors</h2>

			
			
<ul>
<li><a href="#Client_Interceptors">Client Interceptors</a>
<ul>
<li><a href="#Security:_HTTP_Basic_Authorization">Security: HTTP Basic Authorization</a></li>
<li><a href="#Security:_HTTP_Bearer_Token_Authorization">Security: HTTP Bearer Token Authorization</a></li>
<li><a href="#Logging:_Log_Requests_and_Responses">Logging: Log Requests and Responses</a></li>
<li><a href="#Cookies:_Add_an_HTTP_Cookie_Header_to_Client_Requests">Cookies: Add an HTTP Cookie Header to Client Requests</a></li></ul></li></ul>

			
<p>
				Both generic clients and annotation-driven clients support
				<a href="./apidocs/ca/uhn/fhir/rest/client/IClientInterceptor.html">Client Interceptors</a>,
				which may be registered in order to provide specific behaviour to each
				client request.
			</p>
			
			
<p>
				The following section shows some sample interceptors which may be used.
			</p>
		
			
<div class="section">
<h3><a name="Security:_HTTP_Basic_Authorization"></a>Security: HTTP Basic Authorization</h3>

				
<p>
					The following example shows how to configure your client to
					use a specific username and password in every request.
				</p>

				
					
					
				
<div class="source">
<pre>      // Create a context and get the client factory so it can be configured
      FhirContext ctx = new FhirContext();
      IRestfulClientFactory clientFactory = ctx.getRestfulClientFactory();

      // Create an HTTP basic auth interceptor
      String username = &quot;foobar&quot;;
      String password = &quot;boobear&quot;;
      BasicAuthInterceptor authInterceptor = new BasicAuthInterceptor(username, password);

      // Register the interceptor with your client (either style)
      IPatientClient annotationClient = ctx.newRestfulClient(IPatientClient.class, &quot;http://localhost:9999/fhir&quot;);
      annotationClient.registerInterceptor(authInterceptor);

      IGenericClient genericClient = ctx.newRestfulGenericClient(&quot;http://localhost:9999/fhir&quot;);
      annotationClient.registerInterceptor(authInterceptor);
</pre></div>

			</div>

			
<div class="section">
<h3><a name="Security:_HTTP_Bearer_Token_Authorization"></a>Security: HTTP Bearer Token Authorization</h3>

				
<p>
					The following example shows how to configure your client to
					inject a bearer token authorization header into every request. This
					is used to satisfy servers which are protected using OAUTH2.
				</p>

				
					
					
				
<div class="source">
<pre>      // Create a context and get the client factory so it can be configured
      FhirContext ctx = new FhirContext();
      IRestfulClientFactory clientFactory = ctx.getRestfulClientFactory();

      // In reality the token would have come from an authorization server 
      String token = &quot;3w03fj.r3r3t&quot;; 
      
      BearerTokenAuthInterceptor authInterceptor = new BearerTokenAuthInterceptor(token);

      // Register the interceptor with your client (either style)
      IPatientClient annotationClient = ctx.newRestfulClient(IPatientClient.class, &quot;http://localhost:9999/fhir&quot;);
      annotationClient.registerInterceptor(authInterceptor);

      IGenericClient genericClient = ctx.newRestfulGenericClient(&quot;http://localhost:9999/fhir&quot;);
      annotationClient.registerInterceptor(authInterceptor);
</pre></div>

			</div>

			<a name="req_resp_logging"></a>
			
<div class="section">
<h3><a name="Logging:_Log_Requests_and_Responses"></a>Logging: Log Requests and Responses</h3>

				
<p>
					The <tt>LoggingInterceptor</tt> can be used to
					log every transaction. The interceptor is flexible and can be configured to be extremely
					verbose (logging entire transactions including HTTP headers and payload bodies) 
					or simply to log request URLs, or some combination in between.
				</p>

				
					
					
				
<div class="source">
<pre>         // Create a context and get the client factory so it can be configured
         FhirContext ctx = new FhirContext();
         IRestfulClientFactory clientFactory = ctx.getRestfulClientFactory();

         // Create a logging interceptor
         LoggingInterceptor loggingInterceptor = new LoggingInterceptor();

         // Optionally you may configure the interceptor (by default only
         // summary info is logged)
         loggingInterceptor.setLogRequestSummary(true);
         loggingInterceptor.setLogRequestBody(true);

         // Register the interceptor with your client (either style)
         IPatientClient annotationClient = ctx.newRestfulClient(IPatientClient.class, &quot;http://localhost:9999/fhir&quot;);
         annotationClient.registerInterceptor(loggingInterceptor);

         IGenericClient genericClient = ctx.newRestfulGenericClient(&quot;http://localhost:9999/fhir&quot;);
         genericClient.registerInterceptor(loggingInterceptor);
</pre></div>

			</div>

			
<div class="section">
<h3><a name="Cookies:_Add_an_HTTP_Cookie_Header_to_Client_Requests"></a>Cookies: Add an HTTP Cookie Header to Client Requests</h3>
			
				
<p>
					The <tt>CookieInterceptor</tt> can be used to 
					add an HTTP Cookie header to each request created by the client.
				</p>
				
				
					
					
				
<div class="source">
<pre>      // Create a context and get the client factory so it can be configured
      FhirContext ctx = new FhirContext();
      IRestfulClientFactory clientFactory = ctx.getRestfulClientFactory();

      // Create a cookie interceptor. This cookie will have the name &quot;mycookie&quot; and
      // the value &quot;Chips Ahoy&quot;
      CookieInterceptor interceptor = new CookieInterceptor(&quot;mycookie=Chips Ahoy&quot;);

      // Register the interceptor with your client (either style)
      IPatientClient annotationClient = ctx.newRestfulClient(IPatientClient.class, &quot;http://localhost:9999/fhir&quot;);
      annotationClient.registerInterceptor(interceptor);

      IGenericClient genericClient = ctx.newRestfulGenericClient(&quot;http://localhost:9999/fhir&quot;);
      annotationClient.registerInterceptor(interceptor);
</pre></div>
			
			</div>

		</div>

	


                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014
                        <a href="http://www.uhn.ca">University Health Network</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        <script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1395874-5', 'auto');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>
                </body >
</html>