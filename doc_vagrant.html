<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-12-17 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20141217" />
    <meta http-equiv="Content-Language" content="en" />
    <title>HAPI &#x2013; Creating your own demo server with Vagrant</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<script src="syntaxhighlighter/shCore.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushJScript.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushJava.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushBash.js" type="text/javascript"></script>
                      
        
<script src="syntaxhighlighter/shBrushXml.js" type="text/javascript"></script>
                      
        
<link rel="stylesheet" type="text/css" href="syntaxhighlighter/shCore.css"/>
                      
        
<link rel="stylesheet" type="text/css" href="syntaxhighlighter/shThemeDefault.css"/>
                      
        
<link rel="shortcut icon" href="https://github.com/jamesagnew/hapi-fhir/images/favicon.png"/>
                      
        
<link rel="stylesheet" type="text/css" href="hapi.css"/>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://jamesagnew.github.io/hapi-fhir/" id="bannerLeft">
                                                                                                <img src="images/hapi_fhir_banner.png"  alt="HAPI"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://jamesagnew.github.io/hapi-fhir/" id="bannerRight">
                                                                                                <img src="images/hapi_fhir_banner_right.png"  alt="FHIR"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-12-17
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.8-SNAPSHOT
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://www.uhn.ca/" class="externalLink" title="University Health Network">
        University Health Network</a>
      </li>

  
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://hl7.org/" class="externalLink" title="hl7.org">
        hl7.org</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/jamesagnew/hapi-fhir/" class="externalLink" title="GitHub Page">
        GitHub Page</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Welcome</li>
                              
      <li>
  
                          <a href="index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                
      <li>
  
                          <a href="download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                
      <li>
  
                          <a href="doc_upgrading.html" title="Upgrade Guide">
          <i class="none"></i>
        Upgrade Guide</a>
            </li>
                
      <li>
  
                          <a href="changes-report.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Test Server</li>
                              
      <li>
  
                          <a href="http://fhirtest.uhn.ca" class="externalLink" title="Public Test Server">
          <i class="none"></i>
        Public Test Server</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Vagrant (Private) Test Server</a>
          </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="doc_intro.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                                                                                                                  
      <li>
  
                          <a href="doc_fhirobjects.html" title="The Data Model">
          <i class="icon-chevron-down"></i>
        The Data Model</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="doc_extensions.html" title="Profiles & Extensions">
          <i class="none"></i>
        Profiles & Extensions</a>
            </li>
                    
      <li>
  
                          <a href="doc_resource_references.html" title="Resource References">
          <i class="none"></i>
        Resource References</a>
            </li>
                    
      <li>
  
                          <a href="doc_tags.html" title="Tags">
          <i class="none"></i>
        Tags</a>
            </li>
                    
      <li>
  
                          <a href="doc_validation.html" title="Validation">
          <i class="none"></i>
        Validation</a>
            </li>
              </ul>
        </li>
                                                            
      <li>
  
                          <a href="doc_rest_client.html" title="RESTful Client">
          <i class="icon-chevron-down"></i>
        RESTful Client</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="doc_rest_client_interceptor.html" title="Interceptors (client)">
          <i class="none"></i>
        Interceptors (client)</a>
            </li>
              </ul>
        </li>
                                                                                                                                    
      <li>
  
                          <a href="doc_rest_server.html" title="RESTful Server">
          <i class="icon-chevron-down"></i>
        RESTful Server</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="doc_rest_operations.html" title="RESTful Operations">
          <i class="none"></i>
        RESTful Operations</a>
            </li>
                    
      <li>
  
                          <a href="doc_narrative.html" title="Narrative Generator">
          <i class="none"></i>
        Narrative Generator</a>
            </li>
                    
      <li>
  
                          <a href="doc_cors.html" title="CORS Support">
          <i class="none"></i>
        CORS Support</a>
            </li>
                    
      <li>
  
                          <a href="doc_rest_server_interceptor.html" title="Interceptors (server)">
          <i class="none"></i>
        Interceptors (server)</a>
            </li>
                    
      <li>
  
                          <a href="doc_server_tester.html" title="Web Testing UI">
          <i class="none"></i>
        Web Testing UI</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="doc_logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                
      <li>
  
                          <a href="doc_tinder.html" title="Tinder Plugin">
          <i class="none"></i>
        Tinder Plugin</a>
            </li>
                              <li class="nav-header">Community</li>
                              
      <li>
  
                          <a href="https://groups.google.com/d/forum/hapi-fhir" class="externalLink" title="Google Group">
          <i class="none"></i>
        Google Group</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/jamesagnew/hapi-fhir/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">JavaDocs</li>
                              
      <li>
  
                          <a href="apidocs/index.html" title="Core API">
          <i class="none"></i>
        Core API</a>
            </li>
                
      <li>
  
                          <a href="apidocs-dstu/index.html" title="Model API (DSTU1)">
          <i class="none"></i>
        Model API (DSTU1)</a>
            </li>
                
      <li>
  
                          <a href="apidocs-dev/index.html" title="Model API (DEV)">
          <i class="none"></i>
        Model API (DEV)</a>
            </li>
                
      <li>
  
                          <a href=".https://github.com/jamesagnew/hapi-fhir" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="team-list.html" title="Developers">
          <i class="none"></i>
        Developers</a>
            </li>
                
      <li>
  
                          <a href="surefire-report.html" title="Unit Test Report">
          <i class="none"></i>
        Unit Test Report</a>
            </li>
                
      <li>
  
                          <a href="findbugs.html" title="FindBugs">
          <i class="none"></i>
        FindBugs</a>
            </li>
                
      <li>
  
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/jamesagnew/hapi-fhir" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="hl7api.sourceforge.net/hapi-fhir/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                         <a href="https://github.com/jamesagnew/hapi-fhir" title="Hosted on GitHub" class="builtBy">
        <img class="builtBy"  alt="Hosted on GitHub" src="images/github-logo-mini.png"    />
      </a>
                                                                                                          <a href="http://maven.apache.org" title="Built with Maven 3" class="builtBy">
        <img class="builtBy"  alt="Built with Maven 3" src="images/maven-logo-mini.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Creating your own demo server with Vagrant</h1>
<p>This source code repository includes configuration files to materialize an <i>entire</i> server implementation off all project build artifacts in a single virtual machine (VM) image from scratch, allowing you to quickly bootstrap your own local copy of the project. The server will be completely encapsulated within the created VM image. The process <i>should</i> run on OSX, Linux and Windows, but YMMV. The built-in settings support creation of a <i>VirtualBox</i>-based image on Ubuntu Linux, though with tuning of the base image you should be able to create images suitable for other hypervisors and cloud-based IaaS providers such as VMware and Amazon Web Services (AWS), respectively.</p>
<div class="section">
<h2><a name="Dependencies"></a>Dependencies</h2>
<p>Prior to running, please ensure you have all .war files built, and the following installed and functioning propertly.</p>

<ul>
  
<li>All normal Java development dependencies. (Java SDK and Maven 3, specifically.)</li>
  
<li>VirtualBox</li>
  
<li>Vagrant</li>
</ul></div>
<div class="section">
<h2><a name="Creating_Your_VM"></a>Creating Your VM</h2>

<div class="source">
<div class="source">
<pre>cd hapi-fhir-root/
mvn install # Creates web application .war files. Make sure they're built before proceeding!
cd vagrant
vagrant up # Will take a few minutes to boot up.
</pre></div></div>
<p>Your new server environment should now be running in a headless virtual machine on your local computer. The following step are performed automatically for you within the VM sandbox environment:</p>

<ul>
  
<li>A complete Ubuntu 14.04 Server VM is launched in headless mode, bridged to whatever host network interface you&#x2019;ve selected.</li>
  
<li>An IPv4 address is assigned via DHCP.</li>
  
<li>MySQL Server (Community Edition) is installed from the official 10gen repository. (See the <a class="externalLink" href="https://github.com/preston/hapi-fhir/blob/master/vagrant/Vagrantfile">Vagrantfile</a> for the default root password.)</li>
  
<li>Oracle Java 8 is installed.</li>
  
<li>Tomcat 7 is installed and configured as a system service.</li>
  
<li>All compiled *.war applications are deployed automatically and started.</li>
  
<li>A &#x201c;fhir&#x201d; user is added to tomcat-users.xml. See <a class="externalLink" href="https://github.com/preston/hapi-fhir/blob/master/vagrant/chef/data_bags/tomcat_users/fhir.json">fhir.json</a> for the default password.</li>
</ul>
<p>Tomcat will now be running on the VM on port 8080 with the management GUI available. For example, you can now visit:</p>

<ul>
  
<li><i>Tomcat Manager</i>: assigned_ip:8080/manager/html</li>
  
<li><i>HAPI FHIR</i> JPA Server: assigned_ip:8080/hapi-fhir-jpaserver/</li>
</ul></div>
<div class="section">
<h2><a name="Screenshots"></a>Screenshots</h2>
<p><img src="https://raw.githubusercontent.com/preston/hapi-fhir/master/vagrant/screenshots/tomcat.png" alt="Tomcat Manager" /></p>
<p><img src="https://raw.githubusercontent.com/preston/hapi-fhir/master/vagrant/screenshots/hapi-fhir-jpaserver.png" alt="Demo Server" /></p></div>
<div class="section">
<h2><a name="Advanced_Configuration"></a>Advanced Configuration</h2>
<p>The Vagrant documentation is the best place to start, but a few more commands of note are:</p>

<div class="source">
<div class="source">
<pre>vagrant ssh # Command-line access to the VM.
vagrant destoy # Shuts down and completely destroys the VM.
</pre></div></div></div>
<div class="section">
<h2><a name="Credits"></a>Credits</h2>
<p>Vagrant and Chef configuration by Preston Lee <a class="externalLink" href="mailto:preston.lee@prestonlee.com">preston.lee@prestonlee.com</a></p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014
                        <a href="http://www.uhn.ca">University Health Network</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        <script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1395874-5', 'auto');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>
                </body >
</html>